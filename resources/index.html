<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fluecode</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/cssRules.css">
    <link rel="stylesheet" href="css/fluentIconFont.css">
    <link rel="stylesheet" href="css/fluentFont.css">
    <link rel="stylesheet" href="css/languageIconFont.css">
    <!-- Neutralino.js client. -->
    <script src="js/neutralino.js"></script>
    <!-- Fluecode app's source files -->
    <script async type="module" src="js/main.js"></script>
    <script async type="module" src="js/assets.js"></script>
    
    <script async src="js/style.js"></script>
    <script defer src="js/file.js"></script>
    <script defer src="js/editor.js"></script>
    <script defer src="js/fileNav.js"></script>
    <script defer src="js/storage.js"></script>
    <script async src="js/keybindings.js"></script>
    <script async src="js/events.js"></script>
  </head>
  <body>
    <main id="content-main" class="main" style="display: none;">
      <fluent-toolbar id="topAppPanel-nav" class="topNav-fluent-toolbar" style="background-color: var(--second-bg-color);">
        <div>
          <fluent-button appearance="stealth" onclick="toggleNodeDisplay('#addFiles-fluent-menu')" onblur="hideNode('#addFiles-fluent-menu')"><div class="flex gap"><span class="fluent-icon fluent-icon--AddTo"></span><span>Add files</span></div></fluent-button>
          <fluent-menu id="addFiles-fluent-menu" style="display: none;">
            <fluent-menu-item onmousedown="uploadFile();"><div class="flex gap"><span class="fluent-icon fluent-icon--OpenFile"></span><span>Open files</span></div></fluent-menu-item>
            <fluent-menu-item onmousedown="createNewFile();"><div class="flex gap"><span class="fluent-icon fluent-icon--PageAdd"></span><span>New file</span></div></fluent-menu-item>
            <fluent-menu-item onmousedown="uploadFolder();"><div class="flex gap"><span class="fluent-icon fluent-icon--FabricFolderUpload"></span><span>Open directory</span></div></fluent-menu-item>
          </fluent-menu>
        </div>
        <fluent-button id="saveAllFiles-fluent-button" appearance="stealth" onclick="FileManager.saveAllFiles();"><span class="fluent-icon fluent-icon--Save"></span></fluent-button>
        <fluent-button id="closeAllFiles-fluent-button" appearance="stealth" onclick="FileManager.closeAllFiles();"><span class="fluent-icon fluent-icon--PageRemove"></span></fluent-button>
        <div slot="end" class="margin-y">
          <fluent-search id="fileSearch-fluent-search" appearance="outline" placeholder="Search in files" style="width: 200px;" onblur="hideNode('#fileSearch-fluent-menu')" oninput='FileNav.searchInFileItems(this.value)'></fluent-search>
          <fluent-menu id="fileSearch-fluent-menu" style="display: none; width: 200px;"></fluent-menu>
        </div>
        <div slot="end" style="border-right: 1px solid var(--third-bg-color);">
          <fluent-button id="createSplitView-fluent-button" appearance="stealth" onclick="createSplitView();"><span class="fluent-icon fluent-icon--ViewAll2"></span></fluent-button>
          <fluent-button id="exitSplitView-fluent-button" appearance="stealth" onclick="exitSplitView();" style="display: none;"><span class="fluent-icon fluent-icon--CellSplitVertical"></span></fluent-button> 
        </div>
        <fluent-button id="settings-fluent-button" slot="end" appearance="stealth" onclick="modifyNodeAttribute('#settings-fluent-dialog', 'hidden', false)"><span class="fluent-icon fluent-icon--Settings"></span></fluent-button>
      </fluent-toolbar>
      <section class="main-section" style="">
        <nav id="fileSide-nav" class="side-nav padding-x">
          <div id="fileNavContainer-div"></div>
        </nav>
        <article id="editor-article" class="editor-article" style="display: none;">
          <fluent-toolbar id="topEditorPanel-nav" class="topNav-fluent-toolbar" style="border-bottom: 1px solid var(--third-bg-color);">
            <form id="searchAndReplace-form" slot="start" role="search" style="transition: width 1s ease-in-out; width: auto;"></form>
            <div slot="end" style="border-right: 1px solid var(--third-bg-color);">
              <fluent-button id="cutText-fluent-button" appearance="stealth" onclick="EditorManager.cut();"><span class="fluent-icon fluent-icon--Cut"></span></fluent-button>   
              <fluent-button id="copyText-fluent-button" appearance="stealth" onclick="EditorManager.copy();"><span class="fluent-icon fluent-icon--Copy"></span></fluent-button>   
              <fluent-button id="pasteText-fluent-button" appearance="stealth" onclick="EditorManager.paste();"><span class="fluent-icon fluent-icon--PasteAsText"></span></fluent-button>
            </div>
            <div slot="end" style="border-right: 1px solid var(--third-bg-color);">
              <fluent-button id="editorUndo-fluent-button" appearance="stealth" onclick="EditorManager.undo();"><span class="fluent-icon fluent-icon--Undo"></span></fluent-button>   
              <fluent-button id="editorRedo-fluent-button" appearance="stealth" onclick="EditorManager.redo();"><span class="fluent-icon fluent-icon--Redo"></span></fluent-button>
            </div>
            <div slot="end">
              <fluent-button id="fileProperties-fluent-button" appearance="stealth" onclick="modifyNodeAttribute('#fileProperties-fluent-dialog', 'hidden', false)"><span class="fluent-icon fluent-icon--Info"></span></fluent-button>
            </div>
          </fluent-toolbar>
          <div id="editorContainer-div" class="editorContainer-div"></div>
        </article>
        <article id="editorStartPage-article" class="editor-article" style="display: none;">
          <div class="flex" style="flex-wrap: wrap; width: 100%; height: 100%; padding: 40px 60px; gap: 40px; overflow: auto;">
            <div class="flex flex-col" style="flex: 300px; gap: 10px; width: calc(50% - 20px); height: 220px;">
              <header>Files</header>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="uploadFile();">
                <span class="fluent-icon fluent-icon--Upload"></span><span>Open files</span>
              </fluent-card>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="createNewFile();">
                <span class="fluent-icon fluent-icon--Add"></span><span>Create file</span>
              </fluent-card>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="uploadFolder();">
                <span class="fluent-icon fluent-icon--FabricFolderUpload"></span><span>Open directory</span>
              </fluent-card>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="openLastFilesFromStorage();">
                <span class="fluent-icon fluent-icon--CalendarAgenda"></span><span>Restore last files</span>
              </fluent-card>
            </div>
            <div class="flex flex-col" style="flex: 300px; gap: 10px; width: calc(50% - 20px); height: 180px;">
              <header>Settings</header>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="showSettingsMain();">
                <span class="fluent-icon fluent-icon--Settings"></span><span>Open settings</span>
              </fluent-card>
              <fluent-card class="flex" style="padding: 10px; gap: 10px; min-width: 150px; max-width: 300px; height: 40px;" onclick="openSettingsFile();">
                <span class="fluent-icon fluent-icon--TextDocumentSettings"></span><span>Open settings file</span>
              </fluent-card>
            </div>
          </div>
        </article>
      </section>
      <nav class="bottom-nav flex">
        <div id="bottomFileInfo-div" class="flex justify-start gap" style="overflow: hidden; width: calc(50% - calc(var(--bottom-short-info-width) / 2));">
          <span data-fileInfo="path"></span>
        </div>
        <div id="bottomShortInfo-div" class="flex justify-center" style="overflow: hidden; width: var(--bottom-short-info-width);">
          <span id="bottomShortInfo-span"></span>
        </div>
        <div id="bottomEditrInfo-div" class="flex justify-end gap" style="overflow: hidden; width: calc(50% - calc(var(--bottom-short-info-width) / 2))">
          <span>Ln: </span><span data-editorInfo="currentLine"></span>
          <span>Col: </span><span data-editorInfo="currentColumn"></span><span class="margin-y" style="color: var(--scrollbar-color);">|</span>
          <span>Length: </span><span data-editorInfo="length"></span><span class="margin-y" style="color: var(--scrollbar-color);">|</span>
          <span data-fileInfo="language"></span>
        </div>
      </nav>
      <!-- Fluentcode dialogs -->
      <fluent-dialog id="fileProperties-fluent-dialog" hidden="true">
        <div style="width: 100%; height: 100%; padding: 10px;">
          <div class="flex" style="width: 100%; height: 40px;">
            <div class="flex justify-start" style="width: 50%;">
              <span class="text-2xl">File properties</span>
            </div>
            <div class="flex justify-end" style="width: 50%;">
              <fluent-button class="relative" appearance="stealth" onclick="modifyNodeAttribute('#fileProperties-fluent-dialog', 'hidden', true)" style="left: 5px; top: -5px;"><span class="fluent-icon fluent-icon--ChromeClose"></span></fluent-button>
            </div>
          </div>
          <div class="flex flex-col margin-y" style="width: 100%; height: calc(100% - 80px); gap: 15px;">
            <div class="flex gap" style="align-items: center;">
              <span class="text-lg">Size:</span><fluent-badge data-filePropertiesInfo="size"></fluent-badge>
            </div>
            <div class="flex gap" style="align-items: center;">
              <span class="text-lg">Creation date: </span><fluent-badge data-filePropertiesInfo="creationDate"></fluent-badge>
            </div>
            <div class="flex gap" style="align-items: center;">
              <span class="text-lg">Modify date: </span><fluent-badge data-filePropertiesInfo="modifyDate"></fluent-badge>
            </div>
            <fluent-divider></fluent-divider>
            <span class="text-xl">Rename file</span>
            <div class="flex gap">
              <div class="flex gap" style="align-items: center;">
                <span class="text-lg">New file name: </span>
                <fluent-text-field></fluent-text-field>
              </div>
              <fluent-button appearance="accent" class="margin-y">Confirm</fluent-button>
            </div>
            <fluent-divider></fluent-divider>
          </div>
          <div class="flex gap justify-end" style="width: 100%; height: 40px;">
            <fluent-button appearance="outline" onclick="modifyNodeAttribute('#fileProperties-fluent-dialog', 'hidden', true)">Close</fluent-button>
          </div>
        </div>
      </fluent-dialog>
      <fluent-dialog id="settings-fluent-dialog" hidden="true">
         <div style="width: 100%; height: 100%; padding: 10px;">
          <div class="flex" style="width: 100%; height: 40px;">
            <div class="flex justify-start" style="width: 50%;">
              <span class="text-2xl">Settings</span>
            </div>
            <div class="flex justify-end" style="width: 50%;">
              <fluent-button class="relative" appearance="stealth" onclick="modifyNodeAttribute('#settings-fluent-dialog', 'hidden', true)" style="left: 5px; top: -5px;"><span class="fluent-icon fluent-icon--ChromeClose"></span></fluent-button>
            </div>
          </div>
          <div style="width: 100%; height: calc(100% - 80px);">
            <fluent-tabs activeid="settingsThemingTab-container">
              <fluent-tab id="settingsThemingTab-container" class="margin-y">Theming</fluent-tab>
              <fluent-tab id="settingsAppTab-container" class="margin-y">App</fluent-tab>
              <fluent-tab id="settingsEditorTab-container" class="margin-y">Editor</fluent-tab>
              <fluent-tab id="settingsFileTab-container" class="margin-y">Files</fluent-tab>
              <fluent-tab id="settingsInfoTab-container" class="margin-y">Info</fluent-tab>
              <fluent-tab-panel class="padding-x padding-y" >
                <div class="flex flex-col margin-x" style="gap: 20px;">
                  <div class="flex justify-between" style="align-items: center;">
                    <div>App color mode</div>
                    <fluent-select data-settings='["mode"]'>
                      <fluent-option value="system">System default</fluent-option>
                      <fluent-option value="light">Light mode</fluent-option>
                      <fluent-option value="dark">Dark mode</fluent-option>
                    </fluent-select>
                  </div>
                  <fluent-divider></fluent-divider>
                  <div class="flex" style="gap: 10%;">
                    <div class="flex flex-col gap" style="flex: 45%;">
                      <div style="margin-x">Light theme colors</div>
                      <fluent-text-field data-settings='["modes", "light-mode", "accent-bg-color"]'>Accent color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "light-mode", "first-bg-color"]'>First background color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "light-mode", "second-bg-color"]'>Second background color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "light-mode", "third-bg-color"]'>Third background color </fluent-text-field>
                    </div>
                    <div class="flex flex-col gap" style="flex: 45%;">
                      <div style="margin-x">Dark theme colors</div>
                      <fluent-text-field data-settings='["modes", "dark-mode", "accent-bg-color"]'>Accent color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "dark-mode", "first-bg-color"]'>First background color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "dark-mode", "second-bg-color"]'>Second background color </fluent-text-field>
                      <fluent-text-field data-settings='["modes", "dark-mode", "third-bg-color"]'>Third background color </fluent-text-field>
                    </div>
                  </div>
                </div>
              </fluent-tab-panel>
              <fluent-tab-panel class="padding-x padding-y">
                <div class="flex flex-col margin-x" style="gap: 20px;">
                  <div class="flex justify-between">
                    <div>Change settings to default</div>
                    <fluent-button appearance="stealth" onclick="settings.changeSettingsToDefault(); showBottomNavNotification('Settings has been changed to default', 5000);">
                      <div class="flex gap"><span class="fluent-icon fluent-icon--DefaultSettings"></span><span>Change to default</span></div>
                    </fluent-button>
                  </div>
                  <div class="flex justify-between">
                    <div>Open settings in editor</div>
                    <fluent-button appearance="stealth" onclick="openSettingsFile();">
                      <div class="flex gap"><span class="fluent-icon fluent-icon--TextDocumentSettings"></span><span>Open settings file</span></div>
                    </fluent-button>
                  </div>
                  <fluent-divider></fluent-divider>
                  <div class="flex justify-between">
                    <div>Auto update</div>
                    <fluent-switch data-settings='["app", "auto-update"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                </div>
              </fluent-tab-panel>
              <fluent-tab-panel class="padding-x padding-y">
                <div class="flex flex-col margin-x" style="gap: 20px;">
                  <div class="flex justify-between">
                    <div>Font size</div>
                    <fluent-number-field min="8" max="72" data-settings='["editor", "font-size"]'></fluent-number-field>
                  </div>
                  <div class="flex justify-between">
                    <div>Tab size</div>
                    <fluent-number-field min="1" max="10" data-settings='["editor", "tab-size"]'></fluent-number-field>
                  </div>
                  <div class="flex justify-between">
                    <div>Text autocompletion</div>
                    <fluent-switch data-settings='["editor", "language-autocompletion"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                  <div class="flex justify-between">
                    <div>Color preview</div>
                    <fluent-switch data-settings='["editor", "color-preview"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                  <div class="flex justify-between">
                    <div>Progress bar</div>
                    <fluent-switch data-settings='["editor", "progress-bar"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                  <fluent-divider></fluent-divider>
                  <div class="flex justify-between">
                    <div>Light mode highlight</div>
                    <fluent-select data-settings='["modes", "light-mode", "highlight"]'>
                      <fluent-option value="../jsModules/highlight/atom-one-light.js">Atom One Light</fluent-option>
                      <fluent-option value="../jsModules/highlight/dracula.js">Dracula</fluent-option>
                      <fluent-option value="../jsModules/highlight/github-light.js">Github Light</fluent-option>
                      <fluent-option value="../jsModules/highlight/solarized-light.js">Solarized Light</fluent-option>
                      <fluent-option value="../jsModules/highlight/material-light.js">Material Light</fluent-option>
                    </fluent-select>
                  </div>
                  <div class="flex justify-between">
                    <div>Dark mode highlight</div>
                    <fluent-select data-settings='["modes", "dark-mode", "highlight"]'>
                      <fluent-option value="../jsModules/highlight/atom-one-dark.js">Atom One Dark</fluent-option>
                      <fluent-option value="../jsModules/highlight/dracula.js">Dracula</fluent-option>
                      <fluent-option value="../jsModules/highlight/github-dark.js">Github Dark</fluent-option>
                      <fluent-option value="../jsModules/highlight/solarized-dark.js">Solarized Dark</fluent-option>
                      <fluent-option value="../jsModules/highlight/material-dark.js">Material Dark</fluent-option>
                    </fluent-select>
                  </div>
                </div>
              </fluent-tab-panel>
              <fluent-tab-panel class="padding-x padding-y">
                <div class="flex flex-col margin-x" style="gap: 20px;">
                  <div class="flex justify-between">
                    <div>Saving files before close</div>
                    <fluent-switch data-settings='["file", "save-before-close"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                  <div class="flex justify-between">
                    <div>Auto save</div>
                    <fluent-switch data-settings='["file", "auto-save"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                  <div class="flex justify-between">
                    <div>Auto save time (ms). Works only if auto save enabled.</div>
                    <fluent-number-field min="1000" data-settings='["file", "auto-save-time"]'></fluent-number-field>
                  </div>
                  <fluent-divider></fluent-divider>
                  <div class="flex justify-between">
                    <div>File templates</div>
                    <fluent-switch data-settings='["file", "templates"]' data-settings-type="checkbox">
                      <span slot="checked-message">On</span>
                      <span slot="unchecked-message">Off</span>
                      <label for="cap-switch"></label>
                    </fluent-switch>
                  </div>
                </div>
              </fluent-tab-panel>
              <fluent-tab-panel class="padding-x padding-y">
                <div class="flex flex-col margin-x" style="gap: 20px;">
                  <div class="flex">
                    <span>Fluent Code version: </span>
                    <fluent-badge data-appInfo="version"></fluent-badge>
                  </div>
                  <div class="flex flex-col gap">
                    <div>Fluent Code elements, code and packages are licensed under <span class="font-bold">MIT</span> license.</div>
                    <div>Fluent Code installers and other distribution forms are licensed under <span class="font-bold">Creative Commons License Attribution-ShareAlike 4.0</span></div>
                  </div>
                  <div>Fluent Code third part packages</div>
                  <fluent-accordion>
                    <fluent-accordion-item>
                      <span slot="heading">Third part packages</span>
                      <div class="flex flex-col margin-x margin-y" style="max-width: 500px;">
                        <span>Fluent Code depends on this packages:</span>
                        <ul style="list-style-type: '> '; border-left: 1px solid var(--scrollbar-color);">
                          <li>Neutralino JS</li>
                          <li>Codemirror 6</li>
                          <li>Fluent WebComponents</li>
                          <li>Devicon</li>
                          <li>Fabric UI icon font from MDL Package</li>
                          <li>Segoe UI font from MDL Package</li>
                        </ul>
                      </div>
                    </fluent-accordion-item>
                  </fluent-accordion>
                  <div>Special thanks to Marijn Haverbeke</div>
                </div>
              </fluent-tab-panel>
            </fluent-tabs>
          </div>
          <div class="flex gap justify-end" style="width: 100%; height: 40px; align-items: center;">
            <fluent-button appearance="accent" onclick="modifyNodeAttribute('#settings-fluent-dialog', 'hidden', true); Neutralino.events.dispatch('windowClose', {closeType: 'RESTART'});">Apply</fluent-button>
            <fluent-button appearance="outline" onclick="modifyNodeAttribute('#settings-fluent-dialog', 'hidden', true)">Close</fluent-button>
          </div>
        </div>
      </fluent-dialog>
    </main>
    <main id="loading-main" class="main">
      <div class="flex" style="position: absolute; width: 100%; height: 100%; justify-content: center; align-items: center;">
        <fluent-progress-ring></fluent-progress-ring>
      </div>
      <div class="flex" style="position: absolute; width: 100%; height: 100%; justify-content: center; padding-top: 75vh;">
        <fluent-anchor appearance="lightweight">Loading editor...</fluent-anchor>
      </div>
    </main>
  </body>
</html>